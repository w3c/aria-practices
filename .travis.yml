language: node_js

node_js:
  - "node"

addons:
  firefox: "60.0.2"

git:
  depth: 3

stages:
- Test
- name: Deploy
  if: branch = master

jobs:
  include:
    - stage: Test
      script: npm run lint
    - stage: Test
      script: npm run vnu-jar
    - stage: Test
      script: npm run regression
    - stage: Deploy
      script: skip
      before_deploy: scripts/travis-before_deploy.sh
      deploy:
        provider: script
        skip_cleanup: true
        script: /tmp/deploy/travis-deploy.sh

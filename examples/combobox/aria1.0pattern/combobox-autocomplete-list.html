<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Example of Legacy ARIA 1.0 Combobox With an Autocomplete List | WAI-ARIA Authoring Practices 1.1</title>

<!--  Core js and css shared by all examples; do not modify when using this template. -->
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
<link rel="stylesheet" href="../../css/core.css">
<script src="../../js/examples.js"></script>
<script src="../../js/highlight.pack.js"></script>
<script src="../../js/app.js"></script>

<!--  js and css for this example. -->
<link href="css/combobox-1.0.css" rel="stylesheet">
<link  href="css/listbox.css"     rel="stylesheet">

<script src="js/combobox-1.0-list.js"  type="text/javascript"></script>
<script src="js/listbox.js"       type="text/javascript"></script>
<script src="js/listboxOption.js" type="text/javascript"></script>

</head>
<body>
  <main>
  <h1>Example of Legacy ARIA 1.0 Combobox With an Autocomplete List</h1>
  <p>
    <strong>NOTE:</strong> This page is ready to start reviewing.
    This work is tracked by <a href="https://github.com/w3c/aria-practices/issues/99">issue 99</a>.
  </p>
  <p>
    The below example section demonstrates a <code>combobox</code> that implements the
    <a href="../../#combobox">ARIA 1.0 design pattern for combobox.</a>
    This example demonstrates a combobox that provides a list of options to the user.
    The options available in the listbox are filtered based on user input into the textbox.
    The user can select an option from the list to set the value of the textbox.
  </p>
  </p>The major design feature of the ARIA 1.0 combobox pattern is the use of
    <code>aria-activedescendant</code> to reference options in a listbox, while keyboard
    focus remains on the textbox.
  <p>

  <p>Similar examples include: </p>
  <ul>
    <li>
      <a href="combobox-autocomplete-none.html">Combobox Without Autocomplete</a>
      : example demonstrates the behavior associated with <code>aria-autocomplete=none</code>.
    </li>
    <li>
      <a href="combobox-autocomplete-both.html">Combobox With Both List and Inline Autocompletion</a>
      : example demonstrates the behavior associated with <code>aria-autocomplete=both</code>.
    </li>
  </ul>

  <section>
    <h2 id="ex_label">Example</h2>
    <div role="separator" id="ex_start_sep" aria-labelledby="ex_start_sep ex_label" aria-label="Start of"></div>
    <div id="ex1">
      <div class="combobox-list">
        <label for="cb1-input">State</label>

        <div class="group">
          <input id="cb1-input" class="cb_edit" type="text"
                 role="combobox"
                 aria-autocomplete="list"
                 aria-expanded="false"
                 aria-haspopup="true"
                 aria-owns="cb1-listbox"
                 aria-activedescendant=""
          />
          <button id="cb1-button" tabindex="-1" aria-label="open button">
            &#9661;
          </button>
        </div>

        <ul id="cb1-listbox" role="listbox" aria-label="States">
          <li id="lb1-al" role="option">Alabama</li>
          <li id="lb1-ak" role="option">Alaska</li>
          <li id="lb1-as" role="option">American Samoa</li>
          <li id="lb1-az" role="option">Arizona</li>
          <li id="lb1-ar" role="option">Arkansas</li>
          <li id="lb1-ca" role="option">California</li>
          <li id="lb1-co" role="option">Colorado</li>
          <li id="lb1-ct" role="option">Connecticut</li>
          <li id="lb1-de" role="option">Delaware</li>
          <li id="lb1-dc" role="option">District of Columbia</li>
          <li id="lb1-fl" role="option">Florida</li>
          <li id="lb1-ga" role="option">Georgia</li>
          <li id="lb1-gm" role="option">Guam</li>
          <li id="lb1-hi" role="option">Hawaii</li>
          <li id="lb1-id" role="option">Idaho</li>
          <li id="lb1-il" role="option">Illinois</li>
          <li id="lb1-in" role="option">Indiana</li>
          <li id="lb1-ia" role="option">Iowa</li>
          <li id="lb1-ks" role="option">Kansas</li>
          <li id="lb1-ky" role="option">Kentucky</li>
          <li id="lb1-la" role="option">Louisiana</li>
          <li id="lb1-me" role="option">Maine</li>
          <li id="lb1-md" role="option">Maryland</li>
          <li id="lb1-ma" role="option">Massachusetts</li>
          <li id="lb1-mi" role="option">Michigan</li>
          <li id="lb1-mn" role="option">Minnesota</li>
          <li id="lb1-ms" role="option">Mississippi</li>
          <li id="lb1-mo" role="option">Missouri</li>
          <li id="lb1-mn" role="option">Montana</li>
          <li id="lb1-ne" role="option">Nebraska</li>
          <li id="lb1-nv" role="option">Nevada</li>
          <li id="lb1-nh" role="option">New Hampshire</li>
          <li id="lb1-nj" role="option">New Jersey</li>
          <li id="lb1-nm" role="option">New Mexico</li>
          <li id="lb1-ny" role="option">New York</li>
          <li id="lb1-nc" role="option">North Carolina</li>
          <li id="lb1-nd" role="option">North Dakota</li>
          <li id="lb1-nm" role="option">Northern Marianas Islands</li>
          <li id="lb1-oh" role="option">Ohio</li>
          <li id="lb1-ok" role="option">Oklahoma</li>
          <li id="lb1-or" role="option">Oregon</li>
          <li id="lb1-pa" role="option">Pennsylvania</li>
          <li id="lb1-pr" role="option">Puerto Rico</li>
          <li id="lb1-ri" role="option">Rhode Island</li>
          <li id="lb1-sc" role="option">South Carolina</li>
          <li id="lb1-sd" role="option">South Dakota</li>
          <li id="lb1-tn" role="option">Tennessee</li>
          <li id="lb1-tx" role="option">Texas</li>
          <li id="lb1-ut" role="option">Utah</li>
          <li id="lb1-ve" role="option">Vermont</li>
          <li id="lb1-va" role="option">Virginia</li>
          <li id="lb1-vi" role="option">Virgin Islands</li>
          <li id="lb1-wa" role="option">Washington</li>
          <li id="lb1-wv" role="option">West Virginia</li>
          <li id="lb1-wi" role="option">Wisconsin</li>
          <li id="lb1-wy" role="option">Wyoming</li>
        </ul>
      </div>
    </div>
    <div role="separator" id="ex_end_sep" aria-labelledby="ex_end_sep ex_label" aria-label="End of"></div>
  </section>

  <section>
    <h2 id="kbd_label_textbox">Combobox Keyboard Support</h2>

    <table aria-labelledby="kbd_label_textbox" class="def">
      <thead>
        <tr>
          <th>Key</th>
          <th>Function</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th><kbd>Down Arrow</kbd></th>
          <td>
            <ul>
              <li>If the listbox is <strong>closed</strong>, the listbox is opened and <code>aria-activedescendant</code> is set to reference the first option in the listbox.  </li>
              <li>If the listbox is <strong>open</strong>, <code>aria-activedescendant</code> is updated to reference the next option in the listbox.  <br/>Note: When <code>aria-activedescendant</code> is referencing the last option the reference does not change.</li>
              <li>If the listbox is <strong>empty</strong> (e.g. no options avaialble), <code>aria-activedescendant</code> is set to an empty string.</li>
            </ul>
          </td>
        </tr>
        <tr>
          <th><kbd>Up Arrow</kbd></th>
          <td>
            <ul>
              <li>If the listbox is <strong>closed</strong>, the listbox is opened and <code>aria-activedescendant</code> is set to reference the last option in the listbox.  </li>
              <li>If the listbox is <strong>open</strong>, <code>aria-activedescendant</code> is updated to reference the previous option in the listbox.  <br/>Note: When <code>aria-activedescendant</code> is referencing the first option the reference does not change.</li>
              <li>If the listbox is <strong>empty</strong> (e.g. no options avaialble), <code>aria-activedescendant</code> is set to an empty string.</li>
            </ul>          </td>
        </tr>
        <tr>
          <th><kbd>Left Arrow</kbd>,<br/><kbd>Right Arrow</kbd>,<br/><kbd>Backspace</kbd>,<br/><kbd>Printable characters</kbd></th>
          <td>
            <ul>
              <li>The list of options in the listbox are updated based on the text content of the <code>combobox</code>.</li>
              <li>The list of options are filtered based on user input before the edit cursor (e.g. <code>sectionStart</code> property of the textbox).</li>
              <li>After the options are updated:
                <ul>
                  <li>If the currently referenced option <strong>remains</strong> in the list, <code>aria-activedescendant</code> will not change.</li>
                  <li>If the currently referenced option is <strong>not</strong> a match, <code>aria-activedescendant</code> is updated to reference the first item in the new list of options.</li>
                  <li>If there are <strong>no</strong> options available, <code>aria-activedescendant</code> is set to an empty string.</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <th><kbd>Escape</kbd></th>
          <td>If the listbox is <strong>open</strong>, the listbox is closed and aria-activedescendant</code> is set to an empty string.</td>
        </tr>
      </tbody>
    </table>

  </section>

  <section>

    <h2 id="rps_label_combobox">Combobox Role, Property, State, and Tabindex  Attributes</h2>
    <!--
      Update this table to describe how roles, properties, states, and tabindex are used in this example.
    -->
    <table aria-labelledby="rps_label_combobox" class="data attributes">
      <thead>
        <tr>
          <th scope="col">Role</th>
          <th scope="col">Attribute</th>
          <th scope="col">Element</th>
          <th scope="col">Usage</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row"><code>combobox</code></th>
          <td><!--  Leave this cell blank in rows where a role is being described. --></td>
          <td><code>input[type="text"]</code></td>
          <td>
            Identifies the <code>input[type=<q>text</q>] as a combobox option.
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-autocomplete=<q>list</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            The value of <code>list</code> identifies that the combobox only updates
            the the list of options based on user input and and the <code>input[type=<q>text</q>]</code> does
            <code>not</code> provide inline autocompletion.
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-haspopup=<q>true</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            Identifies the <code>combobox</code> as having a popup list of options for the value of the textbox.
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-owns=<q>#IDREF</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            Identifies the <code>listbox</code> that is controlled by the combobox.
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-expanded=<q>false</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            Idenitifies the <code>listbox</code> as closed (e.g. hidden from the user).
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-expanded=<q>true</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            Idenitifies the <code>listbox</code> as open (e.g. visible to the user).
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-activedescendant=<q>#IDREF</q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            References the current autocomplete <code>option</code> in the <code>listbox</code>.
          </td>
        </tr>
        <tr>
          <td>
          </td>
          <th scope="row"><code>aria-activedescendant=<q></q></code></th>
          <td><code>input[type="text"]</code></td>
          <td>
            If no autocomplete <code>option</code> is selected or the list of <code>option</code>s is emtpy, <code>aria-activedescendant</code> is set to an empty string.</td>
          </td>
        </tr>
      </tbody>
    </table>


    <h2 id="rps_label_listbox">Listbox Role, Property, State, and Tabindex  Attributes</h2>
    <!--
      Update this table to describe how roles, properties, states, and tabindex are used in this example.
    -->
    <table aria-labelledby="rps_label_listbox" class="data attributes">
      <thead>
        <tr>
          <th scope="col">Role</th>
          <th scope="col">Attribute</th>
          <th scope="col">Element</th>
          <th scope="col">Usage</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">
            <code>listbox</code>
          </th>
          <td></td>
          <td>
            <code>ul</code>
          </td>
          <td>Identifies the <code>ul</code> element as a <code>listbox</code>.</td>
        </tr>
        <tr>
          <td>
            <code></code>
          </td>
          <th scope="row"><code>aria-label=<q>States</q></code></th>
          <td>
            <code>ul</code>
          </td>
          <td>
            Provides a label for the <code>listbox</code>.
          </td>
        </tr>
        <tr>
          <th scope="row">
            <code>option</code>
          </th>
          <td></td>
          <td>
            <code>li</code>
          </td>
          <td>
            <ul>
              <li>Identifies the <code>li</code> element as a <code>option</code> in a <cpde>listbox</cpde>.</li>
              <li>The text content of the <code>li</code> element provides the accessible name of the <code>option</code>.</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            <code></code>
          </td>
          <th scope="row"><code>id=<q>ID</q></code></th>
          <td>
            <code>li</code>
          </td>
          <td>
            Provides a unique reference for the option that is referenced by the <code>aria-activedescendant</code> attribute of the <code>combobox</code>.
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Javascript and CSS Source Code</h2>
    <!--  After the js and css files are named with the name of this example, change the href and text of the following 2 links to refer to the appropriate js and css files.  -->
    <ul>
      <li>
        CSS:
        <a href="css/combobox-1.0.css" type="text/css">combobox-1.0.css</a>
      </li>
      <li>
        CSS:
        <a href="css/listbox.css" type="text/css">listbox.css</a>
      </li>
      <li>
        Javascript:
        <a href="js/combobox-1.0-list.js" type="text/javascript">combobox-1.0-list.js</a>
      </li>
      <li>
        Javascript:
        <a href="js/listbox.js" type="text/javascript">listbox.js</a>
      </li>
      <li>
        Javascript:
        <a href="js/listboxOption.js" type="text/javascript">listboxOption.js</a>
      </li>
    </ul>
  </section>

  <section>
    <h2 id="sc1_label">HTML Source Code</h2>
    <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_start_sep sc1_label" aria-label="Start of"></div>
    <pre><code id="sc1"></code></pre>
    <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_end_sep sc1_label" aria-label="End of"></div>
    <script>
      sourceCode.add('sc1', 'ex1');
      sourceCode.make();
    </script>
  </section>
  </main>
  <nav>
    <!--  Update the pattern_ID parameter of this link to refer to the APG design pattern section related to this example.  -->
    <a href="../../#pattern_ID">EXAMPLE_NAME Design Pattern in WAI-ARIA Authoring Practices 1.1</a>
  </nav>
</body>
</html>

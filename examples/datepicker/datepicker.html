<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Date Picker Combobox Example | WAI-ARIA Authoring Practices 1.1</title>

<!--  Core js and css shared by all examples; do not modify when using this template. -->
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
<link rel="stylesheet" href="../css/core.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">

<script src="../js/examples.js" type="text/javascript"></script>
<script src="../js/highlight.pack.js"></script>
<script src="../js/app.js"></script>

<link href="css/datepicker.css" rel="stylesheet">
<script src="js/dateInput.js" type="text/javascript"></script>
<script src="js/datePickerDay.js" type="text/javascript"></script>
<script src="js/datepicker.js" type="text/javascript"></script>
</head>
<body>
  <nav aria-label="Related Links" class="feedback">
    <ul>
      <li><a href="../../#browser_and_AT_support">Browser and Assistive Technology Support</a></li>
      <li><a href="https://github.com/w3c/aria-practices/issues/new">Report Issue</a></li>
      <li><a href="https://github.com/w3c/aria-practices/projects/14">Related Issues</a></li>
      <li><a href="../../#datepicker">Design Pattern</a></li>
    </ul>
  </nav>
  <main>
    <h1>Date Picker Combobox Example</h1>
    <p>
      The following command and input examples demonstrate the
      <a href="../../#datepicker">date picker design pattern</a> which is an example of a <code>combobox</code> that opens a dialog box.
      The date picker dialog box in this example is opened when keyboard focus is moved to the text box and a <kbd>down arrow</kbd> key pressed or clicking on the calendar button.
      The date picker dialog uses a <code>grid</code> pattern to show and select a date, and buttons for changing the month and year shown in the grid.  For compatibility with mobile browsers, keyboard focus is moved to the calender button when the date picker dialog box closes, rather than the text input control.  In some mobile browsers moving focus to the input control causes the date picker dialog to open automatically, which is avoided by moving focus to the calendar button.  The accessible name for the calender button and the value of the textbox value are updated when the date picker dialog closes.
    </p>
  <section>
    <h2 id="ex_label">Example</h2>

    <div role="separator" id="ex_start_sep" aria-labelledby="ex_start_sep ex_label" aria-label="Start of"></div>
    <div id="example">

      <div class="datepicker"
           role="combobox"
           aria-expanded="false"
           aria-haspopup="dialog"
           aria-label="Date">
        <label for="id-date-1">Date: </label>

        <input class="datepickerInput"
              type="text"
              placeholder="mm/dd/yyyy"
              id="id-date-1"
              aria-controls="id-datepicker-1">

        <button class="datepickerButton"
          tabIndex="-1"
          aria-label="Pick a date"
          aria-haspopup="true"
          title="Select to change date"
          >
          <i class="fa fa-calendar-alt fa-2x"></i>
        </button>

        <div id="id-datepicker-1" class="datepickerDialog" role="dialog" aria-labelledby="dialogLabel">

          <div class="header">
            <button class="prev-year"
              aria-label="previous year"
              aria-control="dialogLabel">
              <i class="fas fa-angle-double-left fa-lg"></i>
            </button>
            <button class="prev-month"
              aria-label="previous month"
              aria-control="dialogLabel">
              <i class="fas fa-angle-left fa-lg"></i>
            </button>
            <span id="dialogLabel" class="month-year-label" role="status"></span>
            <button class="next-month"
              aria-label="next month"
              aria-control="dialogLabel">
              <i class="fas fa-angle-right fa-lg"></i>
            </button>
            <button class="next-year"
              aria-label="next year"
              aria-control="dialogLabel">
              <i class="fas fa-angle-double-right fa-lg"></i>
            </button>
          </div>

          <table class="dates"
            role="grid"
            aria-labelledby="dialogLabel">
            <thead>
              <tr>
                <th scope="col" aria-label="Sunday">Su</th>
                <th scope="col" aria-label="Monday">Mo</th>
                <th scope="col" aria-label="Tuesday">Tu</th>
                <th scope="col" aria-label="Wednesday">We</th>
                <th scope="col" aria-label="Thursday">Th</th>
                <th scope="col" aria-label="Friday">Fr</th>
                <th scope="col" aria-label="Saturday">Sa</th>
              </tr>
            </thead>
            <tbody class="curr">
            </tbody>
          </table>
          <div class="dialogButtonGroup">
            <button class="dialogButton" value="cancel">
              Cancel
            </button>
            <button class="dialogButton" value="ok">
              OK
            </button>
          </div>
        </div>

      </div>

    </div>
    <div role="separator" id="ex_end_sep" aria-labelledby="ex_end_sep ex_label" aria-label="End of"></div>
  </section>

  <section>
    <h2 id="kbd_label">Keyboard Support</h2>

    <section>
      <h3 id="kbd_label_1">Date Input</h3>
      <table aria-labeeledby="kbd_label_1" class="def">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
            <tr>
                <th><kbd>Down Arrow</kbd></th>
                <td>
                  <ul>
                    <li>Open the calendar dialog.</li>
                    <li>Move focus to current date.</li>
                </ul>
              </td>
            </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h3 id="kbd_label_2">Calendar Button</h3>
      <table aria-labeeledby="kbd_label_2" class="def">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
            <tr>
              <th><kbd>Space</kbd>,<br> <kbd>Return</kbd></th>
              <td>
                <ul>
                  <li>Toggles calendar dialog.</li>
                  <li>NOTE: This button has been removed from <code>tab</code> order of the page by setting <code>tabindex=-1</code>, for compatibility with mobile browsers.</li>
                </ul>
              </td>
            </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h3 id="kbd_label_3">Next/Previous Buttons (for month and year) </h3>
      <table aria-labeeledby="kbd_label_3" class="def">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
            <tr>
                <th><kbd>Space</kbd>,<br> <kbd>Return</kbd></th>
                <td>Change the month for selecting a date.</td>
            </tr>
            <tr>
                <th><kbd>ESC</kbd></th>
                <td>Close the dialog and move focus back to the calendar button.</td>
            </tr>
            <tr>
              <th><kbd>TAB</kbd></th>
              <td>Move focus to next button or grid inside the dialog.</td>
            </tr>
            <tr>
              <th><kbd>Shift</kbd> + <br><kbd>TAB</kbd></th>
              <td>Move focus to previous button or grid inside the dialog.</td>
            </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h3 id="kbd_label_4">Calendar Grid</h3>
      <table aria-labeeledby="kbd_label_4" class="def">
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
          <tr>
              <th><kbd>Space</kbd>,<br><kbd>Return</kbd></th>
              <td>
                <ul>
                  <li>Select the date, close the dialog box and move focus to the calendar button.</li>
                  <li>Focus is move to calendar button for compatibility with mobile browsers.</li>
                </ul>
              </td>
          </tr>
          <tr>
            <th><kbd>Up Arrow</kbd></th>
            <td>Move the focus to the same day of the previous week.</td>
          </tr>
          <tr>
            <th><kbd>Down Arrow</kbd></th>
              <td>Move the focus to the same day of the next week.</td>
          </tr>
          <tr>
            <th><kbd>Right Arrow</kbd></th>
            <td>Move the focus to the next day.</td>
          </tr>
          <tr>
            <th><kbd>Left Arrow</kbd></th>
            <td>Move the focus to the previous day.</td>
          </tr>
          <tr>
            <th><kbd>PageUp</kbd></th>
            <td>
              <ul>
                <li>Change the calendar to the previous month.</li>
                <li>The focus will be on the same day of that week, if it does not exist, then it will move the focus to the same day of previous or next week</li>
              </ul>
            </td>
          </tr>
          <tr>
            <th><kbd>Shift</kbd>+<br> <kbd>PageUp</kbd></th>
            <td>
              <ul>
                <li>Change the calendar to the previous Year.</li>
                <li>The focus will be on the same day of that week, if it does not exist, then it will move the focus to the same day of previous or next week</li>
              </ul>
            </td>
          </tr>
          <tr>
            <th><kbd>PageDown</kbd></th>
            <td>
              <ul>
                <li>Change the calendar to the next month.</li>
                <li>The focus will be on the same day of that week, if it does not exist, then it will move the focus to the same day of previous or next week</li>
              </ul>
            </td>
          </tr>
          <tr>
            <th><kbd>Shift</kbd>+<br> <kbd>PageDown</kbd></th>
            <td>
              <ul>
                <li>Change the calendar to the next Year.</li>
                <li>The focus will be on the same day of that week, if it does not exist, then it will move the focus to the same day of previous or next week</li>
              </ul>
            </td>
          </tr>
          <tr>
            <th><kbd>TAB</kbd></th>
            <td>Move focus to next button inside the dialog.</td>
          </tr>
          <tr>
            <th><kbd>Shift</kbd> +<br> <kbd>TAB</kbd></th>
            <td>Move focus to previous button inside the dialog.</td>
          </tr>
          <tr>
            <th><kbd>ESC</kbd></th>
            <td>
              <ul>
                <li>Close the dialog and move focus back to calendar button.</li>
                <li>Focus is move to calendar button for compatibility with mobile browsers.</li>
            </ul></td>
          </tr>
        </tbody>
      </table>
    </section>
    <section>
        <h3 id="kbd_label_5">OK and Cancel Buttons</h3>
        <table aria-labeeledby="kbd_label_5" class="def">
          <thead>
            <tr>
                <th>Key</th>
                <th>Function</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th> <kbd>Space</kbd>,<br> <kbd>Return</kbd></th>
              <td>
                <ul>
                    <li>If it's "Cancel" button, closes the calendar dialog, moves focus to calendar button, does not update date in date input.</li>
                    <li>If it's "OK" button, closes the calendar dialog, moves focus to calendar button, does update date in date input.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>TAB</kbd></th>
              <td>Move focus to next button inside the dialog.</td>
            </tr>
            <tr>
              <th><kbd>Shift</kbd> +<br><kbd>TAB</kbd></th>
              <td>Move focus to previous button or grid inside the dialog.</td>
            </tr>
            <tr>
              <th><kbd>ESC</kbd></th>
              <td>
                <ul>
                  <li>Closes the calendar dialog, moves focus to calendar button, does not update date in date input.</li>
                  <li>Focus is move to calendar button for compatibility with mobile browsers.</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
    </section>
  </section>

  <section>
    <h2 id="rps_label">Role, Property, State, and Tabindex  Attributes</h2>
    <section>
      <h3 id="rps_label_1">Date Input</h3>
      <table aria-labelledby="rps_label_1" class="data attributes">
        <thead>
          <tr>
            <th scope="col">Role</th>
            <th scope="col">Attribute</th>
            <th scope="col">Element</th>
            <th scope="col">Usage</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><code>role=&quot;combobox&quot;</code></th>
            <td></td>
            <td><code>div</code></td>
            <td>
              <ul>
                <li>Identifies that the input has a combobox.</li>
                <li>Required accessible name comes from the <code>aria-label</code> attribute.</li>
              </ul>
            </td>
          </tr>
          <tr>
            <td></td>
            <th scope="row"><code>aria-label=&quot;Date&quot;</code></th>
            <td><code>div</code></td>
            <td>
              Defines an accessible name, "Date", for the combobox.
            </td>
          </tr>
          <tr>
            <td></td>
            <th scope="row"><code>aria-haspopup=&quot;dialog&quot;</code></th>
            <td><code>div</code></td>
            <td>
              Identifies that the combobox opens a dialog box.
            </td>
          </tr>
          <tr>
            <td></td>
            <th scope="row"><code>aria-expanded=&quot;false&quot;</code></th>
            <td><code>div</code></td>
            <td>
              <code>aria-expanded=&quot;false&quot;</code> when the date picker dialog box is closed.
            </td>
          </tr>
          <tr>
            <td></td>
            <th scope="row"><code>aria-expanded=&quot;true&quot;</code></th>
            <td><code>div</code></td>
            <td>
              <code>aria-expanded=&quot;true&quot;</code> when the date picker dialog box is open.
            </td>
          </tr>
          <tr>
            <td></td>
            <th scope="row"><code>aria-controls=&quot;IDREF&quot;</code></th>
            <td><code>input[type=text]</code></td>
            <td>
              Provides a reference from the textbox and date picker dialog box.
            </td>
          </tr>
        </tbody>
      </table>
    </section>


    <section>
        <h3 id="rps_label_2">Calendar Button</h3>
        <table aria-labelledby="rps_label_2" class="data attributes">
          <thead>
            <tr>
              <th scope="col">Role</th>
              <th scope="col">Attribute</th>
              <th scope="col">Element</th>
              <th scope="col">Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <th scope="row"><code>aria-haspopup=&quot;true&quot;</code></th>
              <td><code>button</code></td>
              <td>
                Indicate that the input has a popup context menu.
              </td>
            </tr>
            <tr>
              <td></td>
              <th scope="row"><code>aria-expanded=&quot;true&quot;</code></th>
              <td><code>button</code></td>
              <td>
                  <ul>
                    <li>Indicate the popup context menu is currently expanded.</li>
                    <li>When the calendar dialog closed, the <code>aria-expanded</code> attribute is removed from element.</li>
                  </ul>
              </td>
            </tr>
            <tr>
              <td></td>
              <th scope="row"><code>aria-label=&quot;<i>String</i>&quot;</code></th>
              <td><code>button</code></td>
              <td>
                <li>Initial value of accessible name is <q>Pick a Date</q>.</li>
                <li>When user selected date, the accessible name will update to current date.</li>
              </td>
            </tr>
          </tbody>
        </table>
      </section>


      <section>
          <h3 id="rps_label_3">Next/Previous Buttons (for month and year)</h3>
          <table aria-labelledby="rps_label_3" class="data attributes">
            <thead>
              <tr>
                <th scope="col">Role</th>
                <th scope="col">Attribute</th>
                <th scope="col">Element</th>
                <th scope="col">Usage</th>
              </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row"><code>status</code></th>
                    <td></td>
                    <td>
                      <code>span</code>
                    </td>
                    <td>
                      <ul>
                        <li>Identifies the element that contains the current month and year as a <code>polite</code> live region.</li>
                        <li>When the month and year changes, the new value will automatically spoke by screen reader, and will not interpurt the current speech.</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                      <td></td>
                      <th scope="row"><code>aira-control=&quot;IDREF&quot;</code></th>
                      <td><code>button</code></td>
                      <td>
                        Provide a reference for screen reader to navigate to the reference content.
                      </td>
                  </tr>
                  <tr>
                      <td></td>
                      <th scope="row"><code>aira-label=&quot;<i>String</i>&quot;</code></th>
                      <td><code>button</code></td>
                      <td>
                        The accessible name of the button is the month and year the button will change the calendar too.
                      </td>
                  </tr>
            </tbody>
          </table>
        </section>

        <section>
            <h3 id="rps_label_4">Calendar Grid</h3>
            <table aria-labelledby="rps_label_4" class="data attributes">
              <thead>
                <tr>
                  <th scope="col">Role</th>
                  <th scope="col">Attribute</th>
                  <th scope="col">Element</th>
                  <th scope="col">Usage</th>
                </tr>
              </thead>
              <tbody>
                  <tr>
                      <th scope="row"><code>dialog</code></th>
                      <td></td>
                      <td>
                        <code>div</code>
                      </td>
                      <td>
                        Identifies the element that serves as the dialog container.
                      </td>
                    </tr>
                    <tr>
                        <td></td>
                        <th scope="row">
                          <code>aria-labelledby=&quot;IDREF&quot;</code>
                        </th>
                        <td>
                          <code>div</code>
                        </td>
                        <td>
                          The accessible name for the dialog is current month and year.
                        </td>
                      </tr>
                  <tr>
                    <th scope="row"><code>grid</code></th>
                    <td></td>
                    <td>
                      <code>table</code>
                    </td>
                    <td>
                      <ul>
                        <li>Identifies the element that serves as the grid widget container.</li>
                        <li>Since the <code>grid</code> role is applied to a <code>table</code> element, the <code>row</code> , <code>rowheader</code>, <code>colheader</code>, and <code>gridcell</code> roles do not need to be specified because they are implied by <code>tr</code>, <code>th</code>, and <code>td</code> tags.</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                      <td></td>
                      <th scope="row"><code>aira-labelledby=&quot;IDREF&quot;</code></th>
                      <td><code>table</code></td>
                      <td>
                      <ul>
                        <li>Define the accessible name for the <code>grid</code> using current month and year.</li>
                      </ul>
                      </td>
                  </tr>
                  <tr>
                      <td></td>
                      <th scope="row"><code>aira-label=&quot;<i>String</i>&quot;</code></th>
                      <td><code>th</code></td>
                      <td>
                      <ul>
                        <li>Define the accessible name as a day of week for column headers.</li>
                      </ul>
                      </td>
                  </tr>

                    <tr>
                      <th scope="row"></th>
                      <td></td>
                      <td>
                        <code>td > button</code>
                      </td>
                      <td>
                        <ul>
                          <li>The button element is use to Identify the dates in calendar grid.</li>
                          <li>Accessible name for the button is the date which is defined by the text content of the button element.</li>
                        </ul>
                      </td>
                    </tr>

                    <tr>
                      <td></td>
                      <th scope="row">
                        <code>tabindex=&quot;0&quot;</code>
                      </th>
                      <td>
                        <code>td > button</code>
                      </td>
                      <td>
                        Identify the currently selected date and make it part of tab sequence of the dialog box.
                      </td>
                    </tr>
                    <tr>
                      <td></td>
                      <th scope="row">
                        <code>tabindex=&quot;-1&quot;</code>
                      </th>
                      <td>
                        <code>td > button</code>
                      </td>
                      <td>
                        Exclude the button from tab sequence to support grid cell navigation.
                      </td>
                    </tr>
                    <tr>
                      <td></td>
                      <th scope="row"><code>aria-selected=&quot;true&quot;</code></th>
                      <td><code>td > button</code></td>
                      <td>
                        Identifies the currently selected date.
                      </td>
                    </tr>
                    <tr>
                        <td></td>
                        <th scope="row"><code>disabled</code></th>
                        <td><code>td > button</code></td>
                        <td>
                          Identifies buttons that represent dates that are not part of current month but are displayed visually.
                        </td>
                      </tr>
              </tbody>
            </table>
          </section>
  </section>

  <section>
    <h2>Javascript and CSS Source Code</h2>
    <ul>
      <li>
        CSS:
        <a href="css/datepicker.css" type="tex/css">datepicker.css</a>
      </li>
      <li>
        Javascript:
        <a href="js/datepicker.js" type="text/javascript">datepicker.js</a>
      </li>
    </ul>
  </section>

 <section>
    <h2 id="sc1_label">HTML Source Code</h2>
    <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_start_sep sc1_label" aria-label="Start of"></div>
    <pre><code id="source1"></code></pre>
    <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_end_sep sc1_label" aria-label="End of"></div>
    <script>
      sourceCode.add('source1', 'example');
      sourceCode.make();
    </script>
  </section>
  </main>
  <nav>
    <a href="../../#datepicker">Date Picker Design Pattern in WAI-ARIA Authoring Practices 1.1</a>
  </nav>
</body>
</html>

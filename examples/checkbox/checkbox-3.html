  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ARIA checkbox Role Example: Mixed state checkbox</title>
    <meta name="generator" content="BBEdit 10.5" />
    <link href="../css/core.css" rel="stylesheet">
    <link href="../css/table.css" rel="stylesheet">
    <link href="css/checkbox-3.css" rel="stylesheet">
    <script src="js/checkbox-3.js" type="text/javascript"></script>
  </head>
  <body>
    <main role="main">
      <h1>ARIA <code>checkbox</code> Role Example: Mixed state checkbox</h1>
      <ul>
          <li>This example illustrates the use of a mixed state checkbox (e.g. all condiments) with a set of standard HTML checkboxes (e.g, condiments options). </li>
          <li>Changing the state of the standard checkboxes will update the state fo the ARIA mixed checkbox. </li> 
          <li>Changing the state of the ARIA mixed checkbox will also update the state of the standard HTML checkboxes.</li>
          <li><code>role="checkbox"</code> is not applied to the standard checkboxes but is to the aria checkbox.</li>
      </ul>
      
      <p> <a href="../../aria-practices.html#checkbox">More information on Checkbox pattern</a></p>
      <div  class="group" id="example">
          <h3 id="gdesc1">Sandwich Condiments</h3>
          <div id="gcb1"
              role="checkbox" 
              class="group_checkbox"
              aria-checked="false" 
              aria-labelledby="gcb1 gdesc1"
              tabindex="0"
              onclick="toggleGroupCheckbox(event)" 
              onkeydown="toggleGroupCheckbox(event)" 
              onfocus="focusCheckbox(event)" 
              onblur="blurCheckbox(event)"
          >
            <img src="./images/checkbox-unchecked-black.png" alt="">
            All condiments
         </div>

          <label>
            <input type="checkbox" 
                id="desc1" 
                value="lettuce" 
                aria-labelledby="desc1 gdesc1"
                >
              Lettuce
           </label>
         
          <label> 
           <input type="checkbox" 
               id="desc2 " 
               value="tomato" 
               aria-labelledby="desc2 gdesc1"
               >
              Tomato
          </label>
          
          <label> 
           <input type="checkbox" 
              id="desc3" 
              value="mustard"
              aria-labelledby="desc3 gdesc1"
              >
              Mustard
          </label>
          <label>
          <input type="checkbox" 
              id="desc4" 
              value="sprouts"
              aria-labelledby="desc4 gdesc1">
              Sprouts
          </label> 
      </div>
      <h2 id="id_a11yfeature">Accessibility Feature</h2>
             <ul>
                <li><code>div[role=checkbox]</code> element identifies the <code>div
                </code>element as  a mixed state checkbox (e.g. All Condiments checkbox).</li>
                <li><code> aria-labelledby</code> attribute is used to identify the grouping label(e.g. Sandwitch Condiments) for all of the checkboxes.  <br/>Note: grouping label is the second Id so that grouping label is read after checkbox label. So screen reader users hear checkbox label before the grouping label. </li> 
                <li><code>div[role=checkbox]</code> element has <code>onkeydown</code> event to support keyboard activation of the checkbox.</li>
                <li><code>div[role=checkbox]</code> element has <code>tabindex="0"</code> to become part of the tab order of the page.</li>
                <li><code>img</code> element is used to visually indicate the state of mixed checkbox because using css techniques or generated content result in visual state disappearing when browsers or operating systems are configured to display high contrast themes. </li>
                <li><code>toggleGroupCheckbox(event)</code> uses <code>aria-checked</code> attribute to make sure the information communicated to asssitive tecnology is the same as the visual state (e.g. <code>img </code>element). </li>
                <li><code>onfocus</code>  and <code>onblur</code> event handlers on both aria checkbox and standard HTML checkboxes support visual focus styling for keyboard only users.</li>
                
              </ul>

      <h2 id="id_kbd">Keyboard Support</h2>
      <table aria-labelledby="id_kbd"> 
        <thead>
          <tr>
            <th>Key</th>
            <th>Function</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Tab</td>
            <td>Moves keyboard focus to checkbox.</td>
          </tr>
          <tr>
            <td>Space</td>
            <td>Toggle the checkbox option either true, false or mixed. False is the default. </td>
          </tr>
        </tbody>
      </table>
      
      <h2 id="id_rps">ARIA Roles, Properties and States</h2>

      <table aria-labelledby="id_rps"> 
        <thead>
          <tr>
            <th>Role</th>
            <th>Property/State</th>
            <th>Usage</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>checkbox</td>
            <td></td>
            <td>
              Identify div as Checkbox widget
            </td>
          </tr>
          <tr>
            <td>aria-checked</td>
            <td></td>
            <td>
                Indicate state of checkbox: 
                <ul>
                <li>Checked  (e.g. aria-checked=true) </li>
                <li>Unchecked  (e.g. aria-checked=false)</li>
                <li>Mixed (e.g. aria-checked=mixed)</li>
                </ul>
            </td>
          </tr>
          <tr>
            <td>aria-labelledby</td>
            <td></td>
            <td>
            Used to include grouping label in the label of each checkbox
            </td>
          </tr>
        </tbody>
      </table>
      
      <script src="../js/examples.js" type="text/javascript"></script>
      
      <h2>Source Code</h2>
      
      <ul>
        <li>CSS: <a href="css/checkbox-3.css" type="tex/css">checkbox.css</a></li>
        <li>Javascript: <a href="js/checkbox-3.js" type="text/javascript">checkbox.js</a></li>
      </ul>
      
      <div id="sc1">
      
      </div>
      
      <script>
        sourceCode.add('sc1', 'example')
        sourceCode.make()
      </script>

  </body>
  </html>

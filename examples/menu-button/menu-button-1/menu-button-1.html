<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Menu Button Example: Actions | WAI-ARIA Authoring Practices 1.1</title>

    <!--  Core js and css shared by all examples; do not modify when using this template. -->
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
    <link rel="stylesheet" href="../../css/core.css">
    <script src="../../js/examples.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script src="../../js/app.js"></script>

    <link href="css/menuButtonAction.css" rel="stylesheet">
    <script src="js/Menubutton.js" type="text/javascript"></script>
    <script src="js/MenuItemAction.js" type="text/javascript"></script>
    <script src="js/PopupMenuAction.js" type="text/javascript"></script>
  </head>
  <body>
    <main>
      <h1>Actions Menu Button Example</h1>
      <p>This example implements the <a href="../../../#menubutton">menu button design pattern</a>
      for a button that provides access to a menu of actions.
      When an element with role <code>button</code> has <code>aria-haspopup=&quot;true&quot;</code>,
      browsers inform assistive technologies that the button is a menu button.
      This role transformation caused by <code>aria-haspopup</code> happens with any element that is recognized as a button,
      including the HTML <code>button</code> and <code>input[type="button"]</code> elements.
      </p>
      <p>Similar examples include: </p>
      <ul>
        <li><a href="../menu-button-2/menu-button-2.html">Navigation Menu Button</a>: The popup menu items are <code>a</code> elements and act as links.</li>
      </ul>
      <section>
        <h2 id="ex_label">Example</h2>
        <div role="separator" id="ex_start_sep" aria-labelledby="ex_start_sep ex_label" aria-label="Start of"></div>        <div id="ex1">

          <p>This example shows a popup menu of actions that can be used for changing states in a web application.</p>

          <div class="menu_button">
            <button
                id="menubutton1"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="menu1"
                >
              Actions
            </button>

            <ul id="menu1" role="menu" aria-labelledby="menubutton1">
              <li role="menuitem"  onclick="updateLastAction(event)">Action 1</li>
              <li role="menuitem"  onclick="updateLastAction(event)">Action 2</li>
              <li role="menuitem"  onclick="updateLastAction(event)">Action 3</li>
              <li role="menuitem"  onclick="updateLastAction(event)">Action 4</li>
            </ul>
          </div>

        <p>
          <label>Last Action: <input id="action_output" type="text" value=""></label>
        </p>

        <script type="text/javascript">

          document.getElementById("action_output").value = "none";

          function updateLastAction(event) {
            document.getElementById("action_output").value = event.currentTarget.innerHTML;
          }

          window.onload=function() {
            var menubutton = new Menubutton(document.getElementById('menubutton1'));
            menubutton.init();
          }

          </script>

        </div>
        <div role="separator" id="ex_end_sep" aria-labelledby="ex_end_sep ex_label" aria-label="End of"></div>

      </section>


      <section>
        <h2 id="kbd_label">Keyboard Support</h2>

        <h3 id="kbd1_label">Menu Button</h3>

        <table aria-labelledby="kbd1_label kbd_label" class="def">
          <thead>
            <tr>
              <th>Key</th>
              <th>Function</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th><kbd>Down Arrow, <br/>Space, <br/>or Enter</kbd></th>
              <td>Open <code>menu</code> and move focus to first <code>menuitem</code></td>
            </tr>
            <tr>
              <th><kbd>Up Arrow Key</kbd></th>
              <td>Open <code>menu</code> and move focus to previous <code>menuitem</code></td>
            </tr>
          </tbody>
        </table>

         <h3 id="kbd2_label" class="widget">Popup Menu Widget</h3>

        <table aria-labelledby="kbd2_label kbd_label" class="def">
          <thead>
            <tr>
              <th style="min-width: 8em">Key</th>
              <th>Function</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th><kbd>Space or Enter</kbd></th>
              <td>
                <ul>
                  <li>Activates any <code>click</code> event associated with the <code>menuitem</code>.  In this example updates the "Last Action" textbox.</li>
                  <li>Moves focus back to <code>menu button</code> and then closes the <code>menu</code>.  NOTE: This sequence is important since hidding the element with focus will cause the focus to move to the beginning of the page.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>Escape</kbd></th>
              <td>
                <ul>
                  <li>Closes popup menu.</li>
                  <li>Moves focus to button menu.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>Up Arrow</kbd></th>
              <td>
                <ul>
                  <li>Moves focus to previous popup menu item.</li>
                  <li>If first popup menu item, focus is moved to the last popup menu item.</li>
                </ul>
              </td>
            </tr>
             <tr>
              <th><kbd>Down Arrow</kbd></th>
              <td>
                <ul>
                  <li>Moves focus to next popup menu item.</li>
                  <li>If last popup menu item, focus is moved to the first popup menu item.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>Home</kbd></th>
              <td>
                <ul>
                  <li>Moves focus to first popup menu item.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>End</kbd></th>
              <td>
                <ul>
                  <li>Moves focus to last popup menu item.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th><kbd>A-Z, a-z</kbd></th>
              <td>
                <ul>
                  <li>Moves focus to the next popup item that starts with that letter.</li>
                  <li>If no popup menu item starts with the letter, focus does not move.</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>


      <section>
        <h2 id="rps_label">Role, Property, State, and Tabindex  Attributes</h2>

        <h3 id="rps1_label">Menu Button Widget</h3>

        <table aria-labelledby="rps1_label rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">Role</th>
              <th scope="col">Attribute</th>
              <th scope="col">Element</th>
              <th scope="col">Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">
                <code>button</code>
              </th>
              <td></td>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>Default <code>role</code> of a <code>button</code> element is "<code>button</code>", so <em>no</em> need to set the <code>role</code> attribute.</li>
                  <li>The accessible name comes from the child text content of the <code>button</code> element (e.g. &quot;Actions&quot;).</li>
                  <li>The <code>button</code> element is a part of the default tab order of the page (e.g. <code>tabindex=0</code>), so <em>no</em> need to set <code>tabindex</code>.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <code></code>
              </td>
              <th scope="row"><code>aria-haspopup=&quot;true&quot;</code></th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>The <code>aria-haspopup</code> attribute defines an element with <code>role=button</code> as a ARIA menu button design pattern and indicates the actions of the button are to open and close the popup menu.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <code></code>
              </td>
              <th scope="row"><code>aria-controls=&quot;IDREF&quot;</code></th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>The <code>aria-controls</code> attribute serves as a pointer to the the popup menu that is controlled by the menu button.</li>
                </ul>
              </td>
            </tr>
            <tr>
                <td></td>
                <th scope="row"><code>aria-expanded=&quot;true&quot;</code></th>
                <td><code>button</code></td>
                <td>
                  <ul>
                    <li>Indicates popup menu is open.</li>
                  </ul>
                </td>
            </tr>
            <tr>
                <td></td>
                <th scope="row"><code>aria-expanded=&quot;false&quot;</code></th>
                <td><code>button</code></td>
                <td>
                  <ul>
                    <li>Indicates popup menu is closed.</li>
                  </ul>
                </td>
            </tr>
          </tbody>
        </table>

        <h3 id="rps2_label">Popup Menu</h3>

        <table aria-labelledby="rps2_label rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">Role</th>
              <th scope="col">Attribute</th>
              <th scope="col">Element</th>
              <th scope="col">Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">
                <code>menu</code>
              </th>
              <td></td>
              <td>
                <code>ul</code>
              </td>
              <td>
                <ul>
                  <li>The <code>role=&quot;menu&quot;</code> attribute identifies the <code>ul</code> element as an ARIA <code>menu</code> widget.</li>
                  <li>Accessible name for the <code>menu</code> widget comes from <code>aria-labelledby</code> attribute.</li>
                  <li>The <code>menu</code> widget does not need a <code>tabindex</code> value, since the <code>ul[role&quot;menu&quot;]</code> element never receives keyboard focus.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <code></code>
              </td>
              <th scope="row"><code>aria-labelledby=&quot;[IDREF]&quot;</code></th>
              <td>
                <code>ul</code>
              </td>
              <td>
                <ul>
                  <li>Pointer to element with the corresponding <code>id=&quot;[IDREF]&quot;</code> that defines the accessible name for the <code>menu</code>, in this example &quot;Actions&quot;.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <th scope="row">
                <code>menuitem</code>
              </th>
              <td></td>
              <td>
                <code>li</code>
              </td>
              <td>
                <ul>
                  <li>The <code>role=&quot;menuitem&quot;</code> attribute identifies the <code>li</code> element as an ARIA <code>menuitem</code> widget.</li>
                  <li>Accessible name for the <code>menuitem</code> widget comes from child text content of the <code>li</code> element.</li>
                  <li>The <code>menuitem</code> widget has <code>tabindex=&quot;-1&quot;</code>.</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>
                <code></code>
              </td>
              <th scope="row"><code>tabindex=&quot;-1&quot;</code></th>
              <td>
                <code>li</code>
              </td>
              <td>
                <ul>
                  <li>Identifies each <code>li[role=menuitem]</code> as an interactive element on the page (e.g. can recived keyboard focus), but is not part of the tab order of the page.</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>

      </section>

      <section>
        <h2>Javascript and CSS Source Code</h2>

        <ul>
          <li>CSS: <a href="css/menuButtonAction.css" type="text/css">MenubuttonAction.css</a></li>
          <li>Javascript: <a href="js/Menubutton.js" type="text/javascript">Menubutton.js</a></li>
          <li>Javascript: <a href="js/MenuItemAction.js" type="text/javascript">MenuItemAction.js</a></li>
          <li>Javascript: <a href="js/PopupMenuAction.js" type="text/javascript">PopupMenuAction.js</a></li>
        </ul>
      </section>
      <section>
        <h2 id="sc1_label">HTML Source Code</h2>
        <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_start_sep sc1_label" aria-label="Start of"></div>
        <pre><code id="sc1"></code></pre>
        <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_end_sep sc1_label" aria-label="End of"></div>
        <!--
          The following script will show the reader the HTML source for the example that is in the div with ID 'ex1'.
          It renders the HTML in the preceding div with ID 'sc1'.
          If you change the ID of either the 'ex1' div or the 'sc1' div, be sure to update the sourceCode.add function parameters.
          -->
        <script>
          sourceCode.add('sc1', 'ex1');
          sourceCode.make();
        </script>
      </section>
    </main>
    <nav>
      <a href="../../../#menubutton">Menu Button Design Pattern in WAI-ARIA Authoring Practices 1.1</a>
    </nav>
  </body>
  </html>
